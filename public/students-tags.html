<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Student Tags | Gold and Linc Schools</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Inter Font + FontAwesome + Tailwind -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Inter', Arial, sans-serif; background: #f6f8fa; color: #22305a; min-height: 100vh;}
    .bg-primary { background: #2647a6; }
    .text-primary { color: #2647a6; }
    .tag-badge {
      display: inline-block;
      border-radius: 9999px;
      padding: 0.15em 1em;
      font-size: 0.98em;
      font-weight: 600;
      margin: 0 0.2em 0.2em 0;
      background: #e9f0fe;
      color: #2647a6;
      cursor: pointer;
      transition: background 0.15s, color 0.15s;
    }
    .tag-badge.selected, .tag-badge:hover {
      background: #2647a6;
      color: #fff;
    }
    .tag-action-btn {
      padding: 0.2em 0.8em;
      border-radius: 7px;
      font-size: 0.95em;
      margin-left: 0.3em;
      cursor: pointer;
      background: #18ba89;
      color: #fff;
      font-weight: 700;
      border: none;
      transition: background 0.18s;
    }
    .tag-action-btn:hover { background: #13a87a; }
    .tag-remove-btn {
      background: #e74c3c;
      color: #fff;
      margin-left: 0.2em;
      padding: 0.15em 0.7em;
      border-radius: 7px;
      border: none;
      font-weight: bold;
      font-size: 0.92em;
      cursor: pointer;
    }
    .tag-remove-btn:hover { background: #c32218; }
    @media (max-width: 900px) {
      .max-w-4xl, .max-w-3xl { max-width: 100vw !important; }
      main { padding-left: 0.5rem; padding-right: 0.5rem; }
    }
    @media (max-width: 700px) {
      main, .bg-white, .bg-[#f6f8fa] { max-width: 100vw !important; padding: 0.5rem !important; }
      .rounded-xl { border-radius: 0.7rem !important; }
      h1, h2, h3 { font-size: 1.1rem !important; }
      .grid-cols-2, .md\:grid-cols-2 { grid-template-columns: 1fr !important; }
    }
  </style>
</head>
<body>
  <!-- Top Navbar -->
  <nav class="bg-white shadow-md rounded-b-2xl py-4 px-6 flex items-center justify-between sticky top-0 z-10">
    <div class="flex items-center gap-3">
      <img src="https://goldlincschools.com/assets/media/logos/favicon.ico" class="h-9 w-9 rounded-lg shadow" alt="Logo">
      <span class="text-xl font-bold text-primary">Student Tags</span>
    </div>
    <div class="flex items-center gap-4">
      <button class="hidden md:inline-block px-4 py-2 rounded-lg bg-primary text-white font-semibold hover:bg-[#18308b] transition" onclick="window.location.href='people.html'">
        <i class="fa fa-arrow-left mr-1"></i> People
      </button>
      <div class="flex items-center gap-2 cursor-pointer" onclick="window.location.href='profile.html'">
        <img id="profileAvatar" class="rounded-full h-8 w-8" src="https://ui-avatars.com/api/?name=Admin&background=2647a6&color=fff" alt="Admin">
        <div class="text-sm font-bold text-primary" id="profileName">Admin</div>
      </div>
    </div>
  </nav>
  <!-- Main Content -->
  <main class="max-w-4xl mx-auto mt-8 px-2">
    <!-- Student Tags Management -->
    <div class="bg-white rounded-xl shadow-md p-7 mb-10">
      <h1 class="text-xl font-bold text-primary mb-2 flex items-center gap-2"><i class="fa fa-tags"></i> Manage Student Tags</h1>
      <div class="mb-5 flex flex-wrap gap-3">
        <form id="addTagForm" class="flex gap-2 items-center" onsubmit="event.preventDefault(); addTag();">
          <input id="newTagInput" type="text" placeholder="Create new tag (e.g. Prefect, Athlete)" class="px-3 py-2 rounded-lg border border-[#ddeaff] text-base" required maxlength="32">
          <button class="tag-action-btn" type="submit"><i class="fa fa-plus"></i> Add Tag</button>
        </form>
      </div>
      <div id="tagsList" class="mb-4 flex flex-wrap gap-2">
        <!-- Tags will be listed here -->
      </div>
      <div class="flex flex-wrap gap-3 mt-2 text-sm text-gray-500">
        <span><i class="fa fa-info-circle"></i> Click a tag to filter students by tag.</span>
        <span>Remove a tag by clicking the <i class="fa fa-times"></i> button on the tag.</span>
      </div>
    </div>
    <!-- Students Table -->
    <div class="bg-white rounded-xl shadow-md p-7 mb-10">
      <div class="flex flex-col md:flex-row md:items-center gap-3 justify-between mb-3">
        <h2 class="text-lg font-bold text-primary flex items-center gap-2"><i class="fa fa-users"></i> Students List</h2>
        <form class="flex items-center gap-2" onsubmit="event.preventDefault(); fetchStudents();">
          <input type="text" id="searchName" placeholder="Search by name or reg no." class="px-3 py-2 rounded-lg border border-[#ddeaff] text-sm">
          <button class="bg-primary text-white px-4 py-2 rounded-lg font-semibold hover:bg-[#18308b] transition text-sm" type="submit"><i class="fa fa-search"></i> Search</button>
        </form>
      </div>
      <div class="overflow-x-auto">
        <table class="min-w-full text-sm">
          <thead class="bg-[#e9f0fe]">
            <tr>
              <th class="py-3 px-4 text-left font-bold text-primary">Name</th>
              <th class="py-3 px-4 text-left font-bold text-primary">Reg No.</th>
              <th class="py-3 px-4 text-left font-bold text-primary">Class</th>
              <th class="py-3 px-4 text-left font-bold text-primary">Tags</th>
              <th class="py-3 px-4 text-left font-bold text-primary">Manage Tags</th>
            </tr>
          </thead>
          <tbody id="studentsTableBody" class="bg-white divide-y divide-[#e9f0fe]">
            <tr><td class="py-2 px-4" colspan="5">Loading...</td></tr>
          </tbody>
        </table>
      </div>
    </div>
    <!-- FAQ Section -->
    <div class="bg-[#f6f8fa] rounded-xl shadow p-7 mb-10">
      <h3 class="text-lg font-bold text-primary mb-3 flex items-center gap-2"><i class="fa fa-question-circle"></i> Tags FAQ</h3>
      <div>
        <div class="mb-2"><strong>What are student tags?</strong> <br/>Tags are labels you can assign to students for special roles, achievements, or characteristics (e.g. "Prefect", "Athlete", "Scholarship", "Needs Support").</div>
        <div class="mb-2"><strong>How do I add or remove tags?</strong> <br/>Use the form above to add new tags. To remove a tag, click the <i class="fa fa-times"></i> button on the tag. Manage a student's tags by using the "Manage Tags" buttons in the table.</div>
        <div class="mb-2"><strong>Can I filter students by tag?</strong> <br/>Yes, click a tag at the top to filter the student list by that tag.</div>
      </div>
    </div>
  </main>
  <script>
    // Demo data
    let tags = ["Prefect", "Athlete", "Scholarship", "Club Leader"];
    let students = [
      {id:1, name:"Janet Okafor", regNo:"STU1001", class:"JSS 1", tags:["Prefect","Athlete"]},
      {id:2, name:"Ali Musa", regNo:"STU1002", class:"JSS 2", tags:["Scholarship"]},
      {id:3, name:"Blessing Uzo", regNo:"STU1003", class:"JSS 3", tags:["Club Leader"]},
      {id:4, name:"Chuka Eze", regNo:"STU1004", class:"SSS 1", tags:[]}
    ];
    let selectedTag = "";

    // Profile fill
    function fillProfile() {
      document.getElementById('profileName').textContent = 'Admin';
      document.getElementById('profileAvatar').src = 'https://ui-avatars.com/api/?name=Admin&background=2647a6&color=fff';
    }

    // Tags UI
    function renderTags() {
      const tagsList = document.getElementById('tagsList');
      tagsList.innerHTML = tags.map(tag => `
        <span class="tag-badge${selectedTag===tag?' selected':''}" onclick="filterByTag('${tag}')">
          <i class="fa fa-tag"></i> ${tag}
          <button class="tag-remove-btn" onclick="event.stopPropagation(); removeTag('${tag}')"><i class="fa fa-times"></i></button>
        </span>
      `).join('');
    }

    function filterByTag(tag) {
      selectedTag = (selectedTag === tag) ? "" : tag;
      renderTags();
      renderStudentsTable();
    }

    function addTag() {
      const tag = document.getElementById('newTagInput').value.trim();
      if (tag && !tags.includes(tag)) {
        tags.push(tag); document.getElementById('newTagInput').value = "";
        renderTags();
      }
    }
    function removeTag(tag) {
      tags = tags.filter(t => t !== tag);
      students.forEach(s => s.tags = s.tags.filter(t => t !== tag));
      if (selectedTag === tag) selectedTag = "";
      renderTags(); renderStudentsTable();
    }

    // Students UI
    function fetchStudents() {
      renderStudentsTable();
    }
    function renderStudentsTable() {
      const tbody = document.getElementById('studentsTableBody');
      let search = document.getElementById('searchName').value.trim().toLowerCase();
      let filtered = students.filter(s =>
        (!selectedTag || s.tags.includes(selectedTag)) &&
        (!search || s.name.toLowerCase().includes(search) || s.regNo.toLowerCase().includes(search))
      );
      if (!filtered.length) {
        tbody.innerHTML = `<tr><td class="py-2 px-4" colspan="5">No students found.</td></tr>`;
        return;
      }
      tbody.innerHTML = filtered.map(s => `
        <tr>
          <td class="py-2 px-4 font-semibold">${s.name}</td>
          <td class="py-2 px-4">${s.regNo}</td>
          <td class="py-2 px-4">${s.class}</td>
          <td class="py-2 px-4">${s.tags.map(t=>`<span class="tag-badge">${t}</span>`).join('') || '<span class="text-gray-400">None</span>'}</td>
          <td class="py-2 px-4">
            <select class="px-2 py-1 rounded-lg border border-[#ddeaff] text-sm" onchange="assignTag(${s.id}, this.value)">
              <option value="">Assign Tag</option>
              ${tags.filter(t=>!s.tags.includes(t)).map(t=>`<option value="${t}">${t}</option>`).join('')}
            </select>
            ${s.tags.map(t=>`<button class="tag-remove-btn" onclick="removeStudentTag(${s.id},'${t}')"><i class="fa fa-times"></i> ${t}</button>`).join('')}
          </td>
        </tr>
      `).join('');
    }
    function assignTag(id, tag) {
      if (!tag) return;
      const s = students.find(s => s.id === id);
      if (s && !s.tags.includes(tag)) { s.tags.push(tag); }
      renderStudentsTable();
    }
    function removeStudentTag(id, tag) {
      const s = students.find(s => s.id === id);
      if (s) s.tags = s.tags.filter(t => t !== tag);
      renderStudentsTable();
    }

    // Init
    fillProfile();
    renderTags();
    renderStudentsTable();
  </script>
</body>
</html>
